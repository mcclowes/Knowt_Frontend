!function(t){t.fn.extend({elastic:function(){var e=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){function r(){curatedWidth=Math.floor(parseInt(n.width(),10)),h.width()!==curatedWidth&&(h.css({width:curatedWidth+"px"}),o(!0))}function i(t,e){var r=Math.floor(parseInt(t,10));n.height()!==r&&(n.css({height:r+"px",overflow:e}),n.trigger("resize"))}function o(t){var e=n.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),r=h.html().replace(/<br>/gi,"<br />");if((t||e+"&nbsp;"!==r)&&(h.html(e+"&nbsp;"),Math.abs(h.height()+d-n.height())>3)){var o=h.height()+d;o>=s?i(s,"auto"):a>=o?i(a,"hidden"):i(o,"hidden")}}if("textarea"!==this.type)return!1;var n=t(this),h=t("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),d=parseInt(n.css("line-height"),10)||parseInt(n.css("font-size"),"10"),a=parseInt(n.css("height"),10)||3*d,s=parseInt(n.css("max-height"),10)||Number.MAX_VALUE,p=0;0>s&&(s=Number.MAX_VALUE),h.appendTo(n.parent());for(var g=e.length;g--;)h.css(e[g].toString(),n.css(e[g].toString()));n.css({overflow:"hidden"}),n.bind("keyup change cut paste",function(){o()}),$(window).bind("resize",r),n.bind("resize",r),n.bind("update",o),n.bind("blur",function(){h.height()<s&&(h.height()>a?n.height(h.height()):n.height(a))}),n.bind("input paste",function(t){setTimeout(o,250)}),o()})}})}(jQuery);