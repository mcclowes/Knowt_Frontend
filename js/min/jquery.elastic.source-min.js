!function(t){t.fn.extend({elastic:function(){var e=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){function i(){console.log("set twin..."),curatedWidth=Math.floor(parseInt(h.width(),10)),n.width()!==curatedWidth&&(n.css({width:curatedWidth+"px"}),o(!0))}function r(t,e){console.log("set height...");var i=Math.floor(parseInt(t,10));h.height()!==i&&(h.css({height:i+"px",overflow:e}),n.height()<a&&(n.height()>s?h.height(n.height()):h.height(s)),h.trigger("resize"))}function o(t){console.log("updated");var e=h.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),i=n.html().replace(/<br>/gi,"<br />");if((t||e+"&nbsp;"!==i)&&(n.html(e+"&nbsp;"),Math.abs(n.height()+d-h.height())>3)){var o=n.height()+d;o>=a?r(a,"auto"):s>=o?r(s,"hidden"):r(o,"hidden")}}if("textarea"!==this.type)return!1;var h=t(this),n=t("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),d=parseInt(h.css("line-height"),10)||parseInt(h.css("font-size"),"10"),s=parseInt(h.css("height"),10)||3*d,a=parseInt(h.css("max-height"),10)||Number.MAX_VALUE,g=0;0>a&&(a=Number.MAX_VALUE),n.appendTo(h.parent());for(var p=e.length;p--;)n.css(e[p].toString(),h.css(e[p].toString()));h.css({overflow:"hidden"}),h.bind("keyup change cut paste",function(){o()}),$(window).bind("resize",i),h.bind("resize",i),h.bind("update",o),h.bind("blur",function(){n.height()<a&&(n.height()>s?h.height(n.height()):h.height(s))}),h.bind("input paste",function(t){setTimeout(o,250)}),o()})}})}(jQuery);